<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Thesis Analyzer - DealFlowAI</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        :root {
            --primary-color: #667eea;
            --secondary-color: #764ba2;
            --accent-color: #4CAF50;
            --text-primary: #333;
            --text-secondary: #666;
            --bg-primary: #ffffff;
            --bg-secondary: #f8f9fa;
            --bg-card: rgba(255, 255, 255, 0.95);
            --border-color: rgba(102, 126, 234, 0.2);
            --shadow: 0 8px 32px rgba(0,0,0,0.1);
            --shadow-hover: 0 15px 40px rgba(0,0,0,0.15);
            --gradient-primary: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            --gradient-secondary: linear-gradient(135deg, #4CAF50, #45a049);
            --gradient-dark: linear-gradient(135deg, #1a1a2e, #16213e);
            --gradient-card: linear-gradient(135deg, #f8f9fa, #ffffff);
            --gradient-card-dark: linear-gradient(135deg, #2d3748, #4a5568);
        }
        
        [data-theme="dark"] {
            --primary-color: #8b5cf6;
            --secondary-color: #a855f7;
            --accent-color: #10b981;
            --text-primary: #f7fafc;
            --text-secondary: #a0aec0;
            --bg-primary: #1a202c;
            --bg-secondary: #2d3748;
            --bg-card: rgba(45, 55, 72, 0.95);
            --border-color: rgba(139, 92, 246, 0.3);
            --shadow: 0 8px 32px rgba(0,0,0,0.3);
            --shadow-hover: 0 15px 40px rgba(0,0,0,0.4);
            --gradient-primary: linear-gradient(135deg, #8b5cf6 0%, #a855f7 100%);
            --gradient-secondary: linear-gradient(135deg, #10b981, #059669);
            --gradient-dark: linear-gradient(135deg, #1a1a2e, #16213e);
            --gradient-card: linear-gradient(135deg, #2d3748, #4a5568);
            --gradient-card-dark: linear-gradient(135deg, #1a202c, #2d3748);
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            color: var(--text-primary);
            background: var(--gradient-primary);
            min-height: 100vh;
            overflow-x: hidden;
            transition: all 0.3s ease;
        }
        
        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 0 20px;
        }
        
        .header {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(20px);
            padding: 1rem 0;
            position: sticky;
            top: 0;
            z-index: 100;
            border-bottom: 1px solid var(--border-color);
            transition: all 0.3s ease;
        }
        
        [data-theme="dark"] .header {
            background: rgba(26, 32, 44, 0.8);
        }
        
        .nav {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .logo {
            font-size: 2rem;
            font-weight: bold;
            color: white;
            text-decoration: none;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
            transition: transform 0.3s ease;
        }
        
        .logo:hover {
            transform: scale(1.05);
        }
        
        .nav-links {
            display: flex;
            gap: 2rem;
            align-items: center;
        }
        
        .nav-links a {
            color: white;
            text-decoration: none;
            padding: 0.5rem 1rem;
            border-radius: 25px;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }
        
        .nav-links a::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);
            transition: left 0.5s;
        }
        
        .nav-links a:hover::before {
            left: 100%;
        }
        
        .nav-links a:hover {
            background: rgba(255, 255, 255, 0.2);
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0,0,0,0.2);
        }
        
        .theme-toggle {
            background: rgba(255, 255, 255, 0.2);
            border: none;
            color: white;
            padding: 0.5rem 1rem;
            border-radius: 25px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 1.2rem;
        }
        
        .theme-toggle:hover {
            background: rgba(255, 255, 255, 0.3);
            transform: translateY(-2px);
        }
        
        .main-content {
            padding: 2rem 0;
            animation: fadeInUp 0.8s ease-out;
        }
        
        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        .analyzer-section {
            background: var(--bg-card);
            border-radius: 20px;
            padding: 3rem;
            margin-bottom: 2rem;
            box-shadow: var(--shadow);
            backdrop-filter: blur(20px);
            border: 1px solid var(--border-color);
            animation: slideInUp 0.6s ease-out;
            transform-style: preserve-3d;
            perspective: 1000px;
        }
        
        @keyframes slideInUp {
            from {
                opacity: 0;
                transform: translateY(50px) rotateX(10deg);
            }
            to {
                opacity: 1;
                transform: translateY(0) rotateX(0deg);
            }
        }
        
        .analyzer-section:hover {
            transform: translateY(-5px) rotateX(2deg);
            box-shadow: var(--shadow-hover);
        }
        
        .analyzer-section h2 {
            color: var(--text-primary);
            margin-bottom: 1rem;
            font-size: 2.5rem;
            background: var(--gradient-primary);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            text-align: center;
        }
        
        .analyzer-section p {
            text-align: center;
            color: var(--text-secondary);
            font-size: 1.1rem;
            margin-bottom: 2rem;
        }
        
        .form-group {
            margin-bottom: 2rem;
        }
        
        .form-group label {
            display: block;
            margin-bottom: 0.5rem;
            color: var(--text-primary);
            font-weight: 600;
            font-size: 1.1rem;
        }
        
        textarea {
            width: 100%;
            min-height: 200px;
            padding: 1.5rem;
            border: 2px solid var(--border-color);
            border-radius: 15px;
            font-size: 1rem;
            font-family: inherit;
            background: var(--bg-primary);
            color: var(--text-primary);
            resize: vertical;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
        }
        
        textarea:focus {
            outline: none;
            border-color: var(--primary-color);
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
            transform: translateY(-2px);
        }
        
        .btn {
            padding: 1.2rem 2.5rem;
            border: none;
            border-radius: 50px;
            font-size: 1.2rem;
            cursor: pointer;
            transition: all 0.3s ease;
            background: var(--gradient-secondary);
            color: white;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 1px;
            position: relative;
            overflow: hidden;
            transform-style: preserve-3d;
        }
        
        .btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.3), transparent);
            transition: left 0.5s;
        }
        
        .btn:hover::before {
            left: 100%;
        }
        
        .btn:hover {
            transform: translateY(-3px) scale(1.05);
            box-shadow: 0 8px 25px rgba(76, 175, 80, 0.3);
        }
        
        .btn:active {
            transform: translateY(-1px) scale(1.02);
        }
        
        .results-section {
            background: var(--bg-card);
            border-radius: 20px;
            padding: 3rem;
            margin-bottom: 2rem;
            box-shadow: var(--shadow);
            backdrop-filter: blur(20px);
            border: 1px solid var(--border-color);
            animation: slideInUp 0.8s ease-out;
            transform-style: preserve-3d;
        }
        
        .results-section:hover {
            transform: translateY(-3px) rotateX(1deg);
            box-shadow: var(--shadow-hover);
        }
        
        .results-section h3 {
            color: var(--text-primary);
            margin-bottom: 1.5rem;
            font-size: 2rem;
            background: var(--gradient-primary);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            text-align: center;
        }
        
        .company-card {
            background: var(--gradient-card);
            border-radius: 15px;
            padding: 2rem;
            margin-bottom: 1.5rem;
            border-left: 5px solid var(--accent-color);
            box-shadow: var(--shadow);
            transition: all 0.3s ease;
            transform-style: preserve-3d;
            position: relative;
            overflow: hidden;
        }
        
        .company-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, rgba(76, 175, 80, 0.1), rgba(102, 126, 234, 0.1));
            opacity: 0;
            transition: opacity 0.3s ease;
        }
        
        .company-card:hover {
            transform: translateY(-5px) rotateX(5deg);
            box-shadow: var(--shadow-hover);
        }
        
        .company-card:hover::before {
            opacity: 1;
        }
        
        .company-name {
            font-size: 1.5rem;
            font-weight: bold;
            color: var(--text-primary);
            margin-bottom: 0.5rem;
            position: relative;
            z-index: 1;
        }
        
        .company-details {
            color: var(--text-secondary);
            margin-bottom: 1rem;
            position: relative;
            z-index: 1;
        }
        
        .fit-score {
            font-weight: bold;
            padding: 0.5rem 1rem;
            border-radius: 20px;
            font-size: 0.9rem;
            position: relative;
            z-index: 1;
        }
        
        .fit-high { background: #d4edda; color: #155724; }
        .fit-medium { background: #fff3cd; color: #856404; }
        .fit-low { background: #f8d7da; color: #721c24; }
        
        [data-theme="dark"] .fit-high { background: #065f46; color: #d1fae5; }
        [data-theme="dark"] .fit-medium { background: #92400e; color: #fef3c7; }
        [data-theme="dark"] .fit-low { background: #991b1b; color: #fecaca; }
        
        .loading {
            text-align: center;
            padding: 3rem;
            color: var(--text-secondary);
        }
        
        .loading::after {
            content: '';
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 3px solid var(--border-color);
            border-top: 3px solid var(--accent-color);
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin-left: 10px;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        .error {
            background: linear-gradient(135deg, #ffebee, #ffcdd2);
            color: #c62828;
            padding: 1.5rem;
            border-radius: 15px;
            margin-bottom: 1rem;
            border-left: 5px solid #c62828;
            box-shadow: 0 4px 15px rgba(198, 40, 40, 0.1);
        }
        
        [data-theme="dark"] .error {
            background: linear-gradient(135deg, #991b1b, #dc2626);
            color: #fecaca;
            border-left: 5px solid #fecaca;
        }
        
        .example-thesis {
            background: linear-gradient(135deg, #e3f2fd, #bbdefb);
            color: #1565c0;
            padding: 1.5rem;
            border-radius: 15px;
            margin-bottom: 2rem;
            border-left: 5px solid #1565c0;
            box-shadow: 0 4px 15px rgba(21, 101, 192, 0.1);
        }
        
        [data-theme="dark"] .example-thesis {
            background: linear-gradient(135deg, #1e3a8a, #3b82f6);
            color: #dbeafe;
            border-left: 5px solid #dbeafe;
        }
        
        .criteria-card {
            background: var(--gradient-card);
            border-radius: 15px;
            padding: 2rem;
            margin-bottom: 2rem;
            box-shadow: var(--shadow);
            border-left: 5px solid var(--primary-color);
        }
        
        .criteria-item {
            display: flex;
            align-items: center;
            margin-bottom: 1rem;
            padding: 1rem;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 10px;
            transition: all 0.3s ease;
        }
        
        .criteria-item:hover {
            background: rgba(255, 255, 255, 0.2);
            transform: translateX(5px);
        }
        
        .criteria-icon {
            font-size: 1.5rem;
            margin-right: 1rem;
        }
        
        .ai-chatbot {
            position: fixed;
            bottom: 2rem;
            right: 2rem;
            width: 400px;
            height: 500px;
            background: var(--bg-card);
            border-radius: 20px;
            box-shadow: var(--shadow);
            border: 1px solid var(--border-color);
            transform: translateY(100%);
            transition: all 0.3s ease;
            z-index: 1000;
            overflow: hidden;
        }
        
        .ai-chatbot.active {
            transform: translateY(0);
        }
        
        .chatbot-header {
            background: var(--gradient-primary);
            color: white;
            padding: 1rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .chatbot-toggle {
            position: fixed;
            bottom: 2rem;
            right: 2rem;
            width: 60px;
            height: 60px;
            background: var(--gradient-primary);
            border: none;
            border-radius: 50%;
            color: white;
            font-size: 1.5rem;
            cursor: pointer;
            box-shadow: var(--shadow);
            transition: all 0.3s ease;
            z-index: 1001;
        }
        
        .chatbot-toggle:hover {
            transform: scale(1.1);
            box-shadow: var(--shadow-hover);
        }
        
        .chatbot-messages {
            height: 400px;
            overflow-y: auto;
            padding: 1rem;
        }
        
        .chatbot-input {
            display: flex;
            padding: 1rem;
            border-top: 1px solid var(--border-color);
        }
        
        .chatbot-input input {
            flex: 1;
            padding: 0.8rem;
            border: 1px solid var(--border-color);
            border-radius: 25px;
            background: var(--bg-primary);
            color: var(--text-primary);
        }
        
        .chatbot-input button {
            margin-left: 0.5rem;
            padding: 0.8rem 1.5rem;
            background: var(--gradient-secondary);
            border: none;
            border-radius: 25px;
            color: white;
            cursor: pointer;
        }
        
        .message {
            margin-bottom: 1rem;
            padding: 0.8rem;
            border-radius: 15px;
            max-width: 80%;
        }
        
        .message.user {
            background: var(--gradient-secondary);
            color: white;
            margin-left: auto;
        }
        
        .message.bot {
            background: var(--gradient-card);
            color: var(--text-primary);
        }
        
        .floating-elements {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: -1;
        }
        
        .floating-element {
            position: absolute;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 50%;
            animation: float 6s ease-in-out infinite;
        }
        
        @keyframes float {
            0%, 100% {
                transform: translateY(0px) rotate(0deg);
            }
            50% {
                transform: translateY(-20px) rotate(180deg);
            }
        }
        
        .floating-element:nth-child(1) {
            width: 80px;
            height: 80px;
            top: 20%;
            left: 10%;
            animation-delay: 0s;
        }
        
        .floating-element:nth-child(2) {
            width: 60px;
            height: 60px;
            top: 60%;
            right: 10%;
            animation-delay: 2s;
        }
        
        .floating-element:nth-child(3) {
            width: 100px;
            height: 100px;
            top: 40%;
            left: 50%;
            animation-delay: 4s;
        }
        
        .examples-section {
            margin: 3rem 0;
        }
        
        .examples-section h3 {
            text-align: center;
            font-size: 2rem;
            margin-bottom: 2rem;
            color: var(--text-primary);
            background: var(--gradient-primary);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        
        .examples-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 1.5rem;
            margin-bottom: 2rem;
        }
        
        .example-card {
            background: var(--gradient-card);
            border-radius: 15px;
            padding: 1.5rem;
            border-left: 5px solid var(--primary-color);
            box-shadow: var(--shadow);
            transition: all 0.3s ease;
            cursor: pointer;
            transform-style: preserve-3d;
        }
        
        .example-card:hover {
            transform: translateY(-5px) rotateX(5deg);
            box-shadow: var(--shadow-hover);
            border-left-color: var(--accent-color);
        }
        
        .example-card h4 {
            color: var(--text-primary);
            font-size: 1.2rem;
            margin-bottom: 0.8rem;
            font-weight: 600;
        }
        
        .example-card p {
            color: var(--text-secondary);
            font-size: 0.95rem;
            line-height: 1.6;
            margin: 0;
        }
        
        .example-card.selected {
            background: linear-gradient(135deg, rgba(76, 175, 80, 0.1), rgba(102, 126, 234, 0.1));
            border-left-color: var(--accent-color);
            transform: translateY(-3px) rotateX(2deg);
        }
        
        @media (max-width: 768px) {
            .analyzer-section {
                padding: 2rem;
                margin: 1rem;
            }
            
            .nav-links {
                flex-direction: column;
                gap: 1rem;
            }
            
            .ai-chatbot {
                width: 90vw;
                height: 70vh;
                right: 5vw;
                left: 5vw;
            }
            
            .chatbot-toggle {
                bottom: 1rem;
                right: 1rem;
            }
        }
    </style>
</head>
<body>
    <div class="floating-elements">
        <div class="floating-element"></div>
        <div class="floating-element"></div>
        <div class="floating-element"></div>
    </div>
    
    <header class="header">
        <nav class="nav container">
            <a href="/" class="logo">DealFlowAI</a>
            <div class="nav-links">
                <a href="/">🏠 Home</a>
                <a href="/thesis-analyzer/">Thesis Analyzer</a>
                <a href="/dashboard/">Dashboard</a>
                <a href="/admin/">Admin</a>
                <button class="theme-toggle" onclick="toggleTheme()">🌙</button>
            </div>
        </nav>
    </header>

    <main class="main-content">
        <div class="container">
            <div class="analyzer-section">
                <h2>🎯 AI-Powered Investment Thesis Analyzer</h2>
                <p>Transform your investment thesis into actionable insights with advanced AI analysis</p>
                
                <div class="example-thesis">
                    <strong>💡 Example Thesis:</strong><br>
                    "We are looking to invest in B2B SaaS companies in the technology sector with Series A-B funding, focusing on enterprise software solutions with $1M-$50M revenue range."
                </div>
                
                <div class="examples-section">
                    <h3>📋 More Thesis Examples</h3>
                    <div class="examples-grid">
                        <div class="example-card" onclick="loadExample(this)">
                            <h4>🏥 Healthcare AI</h4>
                            <p>"Seeking Series A-B healthcare AI companies focusing on diagnostic tools, telemedicine platforms, or patient monitoring solutions with $5M-$20M ARR."</p>
                        </div>
                        <div class="example-card" onclick="loadExample(this)">
                            <h4>💰 FinTech Solutions</h4>
                            <p>"Targeting fintech startups in payment processing, digital banking, or wealth management with Series B-C funding and $10M-$100M revenue."</p>
                        </div>
                        <div class="example-card" onclick="loadExample(this)">
                            <h4>🛒 E-commerce Tech</h4>
                            <p>"Looking for e-commerce technology companies in inventory management, customer analytics, or marketplace platforms with $1M-$25M revenue."</p>
                        </div>
                        <div class="example-card" onclick="loadExample(this)">
                            <h4>🎓 EdTech Innovation</h4>
                            <p>"Investing in EdTech companies developing online learning platforms, skill assessment tools, or corporate training solutions with Series A-B funding."</p>
                        </div>
                        <div class="example-card" onclick="loadExample(this)">
                            <h4>🏭 Manufacturing AI</h4>
                            <p>"Seeking AI-powered manufacturing solutions for predictive maintenance, quality control, or supply chain optimization with $5M-$50M revenue."</p>
                        </div>
                        <div class="example-card" onclick="loadExample(this)">
                            <h4>🏠 PropTech Solutions</h4>
                            <p>"Targeting property technology companies in virtual tours, property management, or real estate analytics with Series A-C funding and $2M-$30M revenue."</p>
                        </div>
                        <div class="example-card" onclick="loadExample(this)">
                            <h4>🚗 Transportation Tech</h4>
                            <p>"Looking for transportation technology companies in fleet management, logistics optimization, or autonomous vehicle solutions with $10M-$100M revenue."</p>
                        </div>
                        <div class="example-card" onclick="loadExample(this)">
                            <h4>⚡ Energy Innovation</h4>
                            <p>"Investing in renewable energy technology, smart grid solutions, or energy storage companies with Series B-C funding and $20M-$200M revenue."</p>
                        </div>
                        <div class="example-card" onclick="loadExample(this)">
                            <h4>🎮 Gaming & Entertainment</h4>
                            <p>"Seeking gaming technology companies, VR/AR platforms, or content creation tools with Series A-B funding and $1M-$25M revenue."</p>
                        </div>
                        <div class="example-card" onclick="loadExample(this)">
                            <h4>🌱 AgTech & Food</h4>
                            <p>"Targeting agricultural technology, food safety solutions, or vertical farming companies with Series A-C funding and $2M-$50M revenue."</p>
                        </div>
                    </div>
                </div>
                
                <form id="thesisForm">
                    <div class="form-group">
                        <label for="thesisText">📝 Enter Your Investment Thesis:</label>
                        <textarea 
                            id="thesisText" 
                            name="thesis_text" 
                            placeholder="Describe your investment thesis here... Include target industries, revenue ranges, funding stages, and key criteria."
                            required
                        ></textarea>
                    </div>
                    
                    <div style="text-align: center;">
                        <button type="submit" class="btn">
                            🔍 Analyze Thesis with AI
                        </button>
                    </div>
                </form>
            </div>
            
            <div id="resultsSection" class="results-section" style="display: none;">
                <h3>📊 Analysis Results</h3>
                <div id="analysisResults"></div>
            </div>
        </div>
    </main>
    
    <!-- AI Chatbot -->
    <button class="chatbot-toggle" onclick="toggleChatbot()">🤖</button>
    
    <div class="ai-chatbot" id="chatbot">
        <div class="chatbot-header">
            <span>💬 AI Investment Assistant</span>
            <button onclick="toggleChatbot()" style="background: none; border: none; color: white; cursor: pointer;">✕</button>
        </div>
        <div class="chatbot-messages" id="chatbotMessages">
            <div class="message bot">
                👋 Hello! I'm your AI investment assistant. Ask me anything about investment theses, company analysis, or market trends!
            </div>
        </div>
        <div class="chatbot-input">
            <input type="text" id="chatbotInput" placeholder="Ask me anything..." onkeypress="handleChatbotKeyPress(event)">
            <button onclick="sendChatbotMessage()">Send</button>
        </div>
    </div>

    <script>
        // Theme management
        let isDarkMode = false;
        
        function toggleTheme() {
            isDarkMode = !isDarkMode;
            document.body.setAttribute('data-theme', isDarkMode ? 'dark' : 'light');
            document.querySelector('.theme-toggle').textContent = isDarkMode ? '☀️' : '🌙';
        }
        
        // Chatbot management
        function toggleChatbot() {
            const chatbot = document.getElementById('chatbot');
            chatbot.classList.toggle('active');
        }
        
        function handleChatbotKeyPress(event) {
            if (event.key === 'Enter') {
                sendChatbotMessage();
            }
        }
        
        function sendChatbotMessage() {
            const input = document.getElementById('chatbotInput');
            const message = input.value.trim();
            
            if (message) {
                addChatbotMessage(message, 'user');
                input.value = '';
                
                // Simulate AI response
                setTimeout(() => {
                    const responses = [
                        "Based on your thesis, I recommend focusing on companies with strong unit economics and proven product-market fit.",
                        "Consider companies in the Series A-B stage as they typically have validated business models and are ready for growth capital.",
                        "Look for companies with recurring revenue models and high customer retention rates.",
                        "Pay attention to the competitive landscape and ensure the company has a sustainable competitive advantage.",
                        "Evaluate the management team's experience and track record in the target market.",
                        "Analyze the company's burn rate and runway to ensure they can reach key milestones.",
                        "Consider the market size and growth potential of the target industry.",
                        "Look for companies with strong customer acquisition channels and scalable growth strategies."
                    ];
                    const randomResponse = responses[Math.floor(Math.random() * responses.length)];
                    addChatbotMessage(randomResponse, 'bot');
                }, 1000);
            }
        }
        
        function addChatbotMessage(message, sender) {
            const messagesContainer = document.getElementById('chatbotMessages');
            const messageDiv = document.createElement('div');
            messageDiv.className = `message ${sender}`;
            messageDiv.textContent = message;
            messagesContainer.appendChild(messageDiv);
            messagesContainer.scrollTop = messagesContainer.scrollHeight;
        }
        
        // Thesis analysis
        document.getElementById('thesisForm').addEventListener('submit', async function(e) {
            e.preventDefault();
            
            const thesisText = document.getElementById('thesisText').value.trim();
            if (!thesisText) {
                alert('Please enter your investment thesis.');
                return;
            }
            
            const resultsSection = document.getElementById('resultsSection');
            const analysisResults = document.getElementById('analysisResults');
            
            resultsSection.style.display = 'block';
            analysisResults.innerHTML = '<div class="loading">Analyzing thesis with AI...</div>';
            
            try {
                const response = await fetch('/api/analyze-thesis/', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                        'X-CSRFToken': getCookie('csrftoken')
                    },
                    body: JSON.stringify({
                        thesis_text: thesisText
                    })
                });
                
                if (!response.ok) {
                    throw new Error(`HTTP error! status: ${response.status}`);
                }
                
                const data = await response.json();
                displayResults(data);
                
            } catch (error) {
                console.error('Error:', error);
                analysisResults.innerHTML = `
                    <div class="error">
                        <strong>❌ Error:</strong> Failed to analyze thesis. Please try again.
                    </div>
                `;
            }
        });
        
        function displayResults(data) {
            const analysisResults = document.getElementById('analysisResults');
            
            let html = '';
            
            // Analysis Summary
            if (data.analysis) {
                html += `
                    <div class="criteria-card">
                        <h4>🔍 Analysis Summary</h4>
                        <p>${data.analysis.summary || 'Analysis completed successfully.'}</p>
                        
                        ${data.analysis.extracted_criteria ? `
                            <h5>📋 Extracted Criteria:</h5>
                            <div class="criteria-item">
                                <span class="criteria-icon">🏭</span>
                                <strong>Industries:</strong> ${data.analysis.extracted_criteria.industries?.join(', ') || 'Not specified'}
                            </div>
                            <div class="criteria-item">
                                <span class="criteria-icon">💰</span>
                                <strong>Revenue Ranges:</strong> ${data.analysis.extracted_criteria.revenue_ranges?.join(', ') || 'Not specified'}
                            </div>
                            <div class="criteria-item">
                                <span class="criteria-icon">📈</span>
                                <strong>Funding Stages:</strong> ${data.analysis.extracted_criteria.funding_stages?.join(', ') || 'Not specified'}
                            </div>
                            ${data.analysis.extracted_criteria.keywords ? `
                                <div class="criteria-item">
                                    <span class="criteria-icon">🔑</span>
                                    <strong>Keywords:</strong> ${data.analysis.extracted_criteria.keywords.join(', ')}
                                </div>
                            ` : ''}
                        ` : ''}
                    </div>
                `;
            }
            
            // Matching Companies
            if (data.matching_companies && data.matching_companies.length > 0) {
                html += '<h4>🏢 Matching Companies</h4>';
                data.matching_companies.forEach(company => {
                    const fitClass = company.fit_score >= 0.8 ? 'fit-high' : company.fit_score >= 0.6 ? 'fit-medium' : 'fit-low';
                    html += `
                        <div class="company-card">
                            <div class="company-name">${company.name}</div>
                            <div class="company-details">
                                <strong>Industry:</strong> ${company.industry?.toUpperCase() || 'N/A'}<br>
                                <strong>Revenue Range:</strong> ${company.revenue_range?.replace('_', ' - ').toUpperCase() || 'N/A'}<br>
                                <strong>Funding Stage:</strong> ${company.funding_stage?.replace('_', ' ').toUpperCase() || 'N/A'}<br>
                                <strong>Description:</strong> ${company.description || 'No description available'}
                            </div>
                            <div class="fit-score ${fitClass}">
                                Fit Score: ${(company.fit_score * 100).toFixed(1)}%
                            </div>
                        </div>
                    `;
                });
            }
            
            // Recommendations
            if (data.recommendations && data.recommendations.length > 0) {
                html += `
                    <div class="criteria-card">
                        <h4>💡 AI Recommendations</h4>
                        ${data.recommendations.map(rec => `
                            <div class="criteria-item">
                                <span class="criteria-icon">💡</span>
                                ${rec}
                            </div>
                        `).join('')}
                    </div>
                `;
            }
            
            analysisResults.innerHTML = html;
        }
        
        function getCookie(name) {
            let cookieValue = null;
            if (document.cookie && document.cookie !== '') {
                const cookies = document.cookie.split(';');
                for (let i = 0; i < cookies.length; i++) {
                    const cookie = cookies[i].trim();
                    if (cookie.substring(0, name.length + 1) === (name + '=')) {
                        cookieValue = decodeURIComponent(cookie.substring(name.length + 1));
                        break;
                    }
                }
            }
            return cookieValue;
        }
        
        // 3D effects on scroll
        window.addEventListener('scroll', function() {
            const scrolled = window.pageYOffset;
            const parallax = document.querySelector('.floating-elements');
            const speed = scrolled * 0.5;
            parallax.style.transform = `translateY(${speed}px)`;
        });
        
        // Load example thesis function
        function loadExample(element) {
            // Remove previous selection
            document.querySelectorAll('.example-card').forEach(card => {
                card.classList.remove('selected');
            });
            
            // Add selection to clicked card
            element.classList.add('selected');
            
            // Get the thesis text from the paragraph
            const thesisText = element.querySelector('p').textContent.replace(/^"|"$/g, '');
            
            // Load into textarea
            document.getElementById('thesisText').value = thesisText;
            
            // Scroll to form
            document.getElementById('thesisForm').scrollIntoView({ 
                behavior: 'smooth',
                block: 'start'
            });
            
            // Show success message
            const successMsg = document.createElement('div');
            successMsg.className = 'success-message';
            successMsg.innerHTML = '✅ Example loaded! Click "Analyze Thesis with AI" to proceed.';
            successMsg.style.cssText = `
                background: linear-gradient(135deg, #d4edda, #c3e6cb);
                color: #155724;
                padding: 1rem;
                border-radius: 10px;
                margin: 1rem 0;
                text-align: center;
                font-weight: 600;
                border-left: 5px solid #28a745;
            `;
            
            // Remove any existing success message
            const existingMsg = document.querySelector('.success-message');
            if (existingMsg) {
                existingMsg.remove();
            }
            
            // Add new message
            element.parentElement.parentElement.appendChild(successMsg);
            
            // Auto-remove after 3 seconds
            setTimeout(() => {
                successMsg.remove();
            }, 3000);
        }
    </script>
</body>
</html> 